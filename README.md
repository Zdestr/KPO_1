# Модуль "Учет Финансов" для ВШЭ-Банка

Прототип ключевого модуля "Учет финансов" для будущего финтех-приложения ВШЭ-Банка. Приложение предоставляет инструменты для управления личными финансовыми средствами, отслеживания доходов и расходов.

## Основные возможности

*   **Управление данными:** Создание, просмотр, редактирование и удаление счетов, категорий и финансовых операций (доходы/расходы).
*   **Аналитика:** Базовый отчет, показывающий общую сумму доходов, расходов и их разницу.
*   **Импорт и Экспорт:** Возможность экспортировать все данные в `JSON` и импортировать их обратно.
*   **Статистика:** Измерение времени выполнения ключевых пользовательских сценариев для анализа производительности.

---

## Архитектура и Принципы Проектирования

Проект построен на принципах **чистой архитектуры** и строго следует ключевым идеям **SOLID** и **GRASP** (High Cohesion, Low Coupling).

### Структура проекта

Решение разделено на три независимых слоя:

1.  **`HSE.Finance.Core`**: Ядро системы. Содержит только доменные модели и абстракции (интерфейсы). Не имеет внешних зависимостей.
2.  **`HSE.Finance.Services`**: Слой сервисов и инфраструктуры. Содержит конкретные реализации интерфейсов из `Core`, бизнес-логику и реализации паттернов.
3.  **`HSE.Finance.ConsoleApp`**: Слой представления. Консольное приложение, которое взаимодействует с пользователем и делегирует всю работу сервисному слою через интерфейсы.

Для связи между слоями используется **Dependency Injection (DI)** контейнер (`Microsoft.Extensions.DependencyInjection`), что обеспечивает слабую связанность и высокую гибкость системы.

### Примененные паттерны GoF

*   **Фабрика (Factory):** Реализована в классе `DomainFactory` для централизованного создания валидных доменных объектов. Это гарантирует, что ни один объект не будет создан с некорректными данными (например, операция с отрицательной суммой).
*   **Фасад (Facade):** `FinanceFacade` предоставляет единый упрощенный интерфейс для всей подсистемы. UI-слой взаимодействует только с фасадом, не зная о сложности внутренней реализации репозиториев, фабрик и т.д.
*   **Команда (Command):** Каждый пользовательский сценарий (создание счета, добавление расхода) инкапсулирован в отдельный класс-команду. Это позволяет передавать действия как объекты.
*   **Декоратор (Decorator):** `TimingCommandDecorator` "оборачивает" любую команду для замера времени ее выполнения, не изменяя исходный код команды. Это демонстрирует соблюдение принципа Открытости/Закрытости.
*   **Шаблонный метод (Template Method):** Использован для импорта данных (`BaseDataImporter`). "Скелет" алгоритма (прочитать файл -> распарсить -> сохранить) определен в базовом классе, а специфичный шаг (парсинг `JSON`) делегирован классу-наследнику.
*   **Посетитель (Visitor):** Применен для экспорта данных. Доменные модели (`BankAccount`, `Operation` и т.д.) принимают "посетителя" (`JsonExportVisitor`), который собирает данные для формирования отчета. Это позволяет добавлять новые форматы экспорта, не изменяя доменные классы.

---

## Технологический стек

*   **Платформа:** .NET 9.0
*   **Язык:** C#
*   **Зависимости:** `Microsoft.Extensions.DependencyInjection`

---

## Инструкция по запуску

**Требования:**
*   .NET 9.0 SDK

**Шаги для запуска:**

1.  Склонируйте репозиторий:
    ```bash
    git clone <URL_репозитория>
    ```

2.  Перейдите в корневую папку решения:
    ```bash
    cd HSE.Finance.Solution
    ```
3.  Соберите проект:
    ```bash
    dotnet build
    ```
4.  Перейдите в папку консольного приложения:
    ```bash
    cd HSE.Finance.ConsoleApp
    ```

5.  Запустите приложение:
    ```bash
    dotnet run
    ```

После запуска приложение выведет приветственное сообщение и главное меню с доступными действиями.

### Пример работы

================ Меню ================
1. Создать новый счет
2. Создать новую категорию
3. Добавить доход
4. Добавить расход
------------------------------------
5. Показать все счета и балансы
6. Показать все операции
7. Показать аналитику
------------------------------------
8. Экспорт данных в JSON
9. Импорт данных из JSON
0. Выход
Ваш выбор: 5
--- Все счета ---
ID: 2f1b7f2b-7e6a-4b0f-8c6a-6f3b7d1c8e1a | Название: Карта Сбер | Баланс: 115 300,00 ₽
ID: a7c8e9d0-1b2c-3d4e-5f6a-7b8c9d0e1f2a | Название: Наличные | Баланс: 13 800,00 ₽

Нажмите любую клавишу для продолжения...
